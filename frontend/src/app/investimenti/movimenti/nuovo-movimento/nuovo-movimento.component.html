<div class="header">
  <div>
    <h2>Nuovo movimento</h2>
    <p class="subtitle">Registra acquisto o vendita</p>
  </div>
</div>

<form [formGroup]="form" (ngSubmit)="submit()" class="form">
  <label>
    Investimento
    <select formControlName="investmentId">
      <option *ngFor="let inv of investments" [value]="inv.id">{{ inv.ticker }} - {{ inv.name }}</option>
    </select>
    <small *ngIf="form.get('investmentId')?.touched && form.get('investmentId')?.invalid">Obbligatorio</small>
  </label>

  <label>
    Tipo
    <select formControlName="type">
      <option *ngFor="let t of movementTypes" [value]="t">{{ t }}</option>
    </select>
  </label>

  <div class="row">
    <label>
      Quantità
      <input type="number" step="0.000001" formControlName="quantity" />
      <small *ngIf="form.get('quantity')?.touched && form.get('quantity')?.invalid">Obbligatorio</small>
    </label>
    <label>
      Prezzo per unità
      <input type="number" step="0.000001" formControlName="pricePerUnit" />
      <small *ngIf="form.get('pricePerUnit')?.touched && form.get('pricePerUnit')?.invalid">Obbligatorio</small>
    </label>
  </div>

  <label>
    Data/Ora
    <input type="datetime-local" formControlName="dateTime" />
  </label>

  <label>
    Note
    <textarea rows="3" formControlName="note" placeholder="Note (opzionale)"></textarea>
  </label>

  <div class="actions">
    <button type="submit" [disabled]="loading">Salva</button>
    <span *ngIf="loading">Salvataggio...</span>
    <span class="error" *ngIf="error">{{ error }}</span>
    <span class="success" *ngIf="success">Salvato!</span>
  </div>
</form>
